<ng4-loading-spinner></ng4-loading-spinner>
<div class="container">
  <button type="button" class="btn btn-success btn-md" data-toggle="modal" data-target="#AddServiceModel">
    Add service
  </button>
</div>


<p></p>
<div class="container">

  <input type="search" class="form-control"
         id="UserLoginInput" [(ngModel)]="searchText" placeholder="Search users by login..."
         (blur)="onBlurSearchForm()" (focus)="onFocusSearchForm()">
  <ul *ngIf="isVisibleUsers == true">
    <li class="list-group-item" *ngFor="let user of users | filter: searchText; let i = index"
        (mousedown)="showUserManageModal(user)">
      {{user.login}}
    </li>
  </ul>

<!--
<div class="md-form">
  <input type="search" [(ngModel)]="searchText" placeholder="Search text">
</div>
<ul *ngFor="let user of users | filter: searchText">
  <li>{{user.login}}</li>
</ul>
-->
  <!--<mat-form-field>
    <input title="User login:" type="text" [matAutocomplete]="auto">
  </mat-form-field>

  <mat-autocomplete #auto="matAutocomplete">
    <mat-option *ngIf="isLoading" class="is-loading"><mat-spinner diameter="50"></mat-spinner></mat-option>
    <ng-container *ngIf="!isLoading">
      <mat-option *ngFor="let user of users" [value]="user.login">
        <span>{{ user.login }}</span>
      </mat-option>
    </ng-container>
  </mat-autocomplete>-->

  <!--<input type="search" class="form-control"
         id="UserLoginInput" [(ngModel)]="searchText" placeholder="Search text"
         (blur)="onBlurSearchForm()" (focus)="onFocusSearchForm()">
  *ngIf="isVisibleUsers == true" >
    <ul *ngIf="isVisibleUsers == true">
      <li class="list-group-item" *ngFor="let user of users | filter: searchText; let i = index"
          (click)="test()" (blur)="$event.stopPropagation(); $event.returnValue = false">
        <button
          (click)="test()"
        >{{user.login}}</button>
        <a href="https://www.google.com/" (click)="test()">{{user.login}}</a>
      </li>
    </ul>-->
    <!--[ngClass]="{active: isUserListItemActive()}"
          (blur)="onBlurUserListItem()" (focus)="onFocusUserListItem()"-->
</div>

<br>

<div class="container table-responsive">
  <table class="table">
    <thead class="thead-dark">
    <tr>
      <th scope="col">Name</th>
      <th scope="col">Discribition</th>
      <th scope="col"></th>
    </tr>
    </thead>
    <tbody>
      <tr class="services"
          *ngFor="let service of services; let i = index">
        <td>{{service.name}}</td>
        <td>{{service.description}}</td>
        <td>
          <button type="button" class="btn btn-danger btn-md" (click)="deleteService()">
            Delete service
          </button>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<ng-template #userManageTemplate>
  <p></p><br><p></p><p></p><p><p>
  <div class="modal-header">
    <h4 class="modal-title pull-left">User manage</h4>
    <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <div class="container">
        <h4>Login: <span class="label label-info">{{selectedUser.login}}</span></h4><br>
        <h4>Email: <span class="label label-info">{{selectedUser.email}}</span></h4><br>
        <h4>Tokens: <span class="label label-info">{{selectedUser.tokens}}</span></h4><br>
        <h4>Status: <span class="label label-danger">{{selectedUser.status}}</span></h4>
        <br>
          <button type="submit" class="btn btn-warning btn-sm" data-toggle="modal"
                  data-target="#AddTokens">Add tokens to user
          </button>
          <button class="btn btn-danger btn-sm">Ban this user</button>
          <button class="btn btn-primary btn-sm">Unban this user</button>
    </div>
    <p></p><br>
    <p></p><p></p><p><p><p><p>
    <div class="table-responsive">

      <table id="ServiceVariantsTable" class="table table-bordered">
        <thead class="thead-dark">
        <tr>
          <th scope="col">Name</th>
          <th scope="col">Period</th>
          <th scope="col">Price/period</th>
          <th scope="col">Status</th>
          <div class="invisible">
            <th scope="col"></th>
          </div>
          <div class="invisible">
            <th scope="col"></th>
          </div>
        </tr>
        </thead>
        <tbody>
        <tr>
          <td>Name X</td>
          <td>Period X</td>
          <td>price</td>
          <td>
            <h4>
									<span class="label label-success">
										Active
									</span>
            </h4>
          </td>
          <td>
            <button type="button" class="btn btn-danger btn-sm" data-toggle="modal" data-target="#AcceptServiceBanModel">
              Ban service
            </button>
          </td>
          <td>
            <button type="button" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#AcceptServiceUnbanModel">
              Unban service
            </button>
          </td>
        </tr>

        <tr>
          <td>Name X</td>
          <td>Period X</td>
          <td>Price X</td>
          <td>
            <h4>
									<span class="label label-success">
										Active
									</span>
            </h4>
          </td>
          <td>
            <button type="button" class="btn btn-danger btn-sm" data-toggle="modal" data-target="#AcceptServiceBanModel">
              Ban service
            </button>
          </td>
          <td>
            <button type="button" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#AcceptServiceUnbanModel">
              Unban service
            </button>
          </td>
        </tr>

        </tbody>
      </table>
    </div>
  </div>
</ng-template>

<div id="AcceptServiceBanModel" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Are you sure about this ban?</h4>
      </div>
      <div class="modal-body">
        <button type="button" class="btn btn-primary" data-dismiss="modal">Yes</button>
        <button type="button" class="btn btn-danger" data-dismiss="modal">No</button>
      </div>
      <div class="modal-footer">
      </div>
    </div>

  </div>
</div>


<div id="AddServiceModel" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Please, fill info</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label for="serviceName">Name:</label>
          <input type="text" class="form-control" id="serviceName" [(ngModel)]="serviceName">
          <label for="basePrice">Base price (for 1 month):</label>
          <input type="number" class="form-control" id="basePrice" [(ngModel)]="basePrice">
          <label for="comment">Discribition:</label>
          <textarea class="form-control" rows="5" id="comment" [(ngModel)]="describition"></textarea>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default"  data-dismiss="modal" (click)="createNewService(serviceName, basePrice, describition)">
          Create subscribition
        </button>
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>

      </div>
    </div>

  </div>
</div>

<div id="AcceptServiceUnbanModel" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Are you sure about this unban?</h4>
      </div>
      <div class="modal-body">
        <button type="button" class="btn btn-primary" data-dismiss="modal">Yes</button>
        <button type="button" class="btn btn-danger" data-dismiss="modal">No</button>
      </div>
      <div class="modal-footer">
      </div>
    </div>

  </div>
</div>


